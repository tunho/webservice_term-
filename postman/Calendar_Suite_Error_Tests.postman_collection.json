{
    "info": {
        "name": "Calendar Suite Error Tests (Final v5)",
        "description": "Comprehensive error tests covering 14+ scenarios (12 errors + 2 setups).",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "1. Login (User) - Setup",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\"email\": \"user@example.com\", \"password\": \"password123\"}"
                },
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/auth/login",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "auth",
                        "login"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "var jsonData = pm.response.json();",
                            "pm.collectionVariables.set(\"access_token\", jsonData.access_token);",
                            "pm.test(\"Login successful\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "2. Get Calendars (Verify List)",
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{access_token}}"
                    }
                ],
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/calendars?page=0&size=10",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "calendars"
                    ],
                    "query": [
                        {
                            "key": "page",
                            "value": "0"
                        },
                        {
                            "key": "size",
                            "value": "10"
                        }
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "3. 400 BAD_REQUEST - Invalid Date Range",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{access_token}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\"calendar_id\": \"test-calendar-id\", \"title\": \"Bad Date Event\", \"start_at\": \"2025-12-25T12:00:00Z\", \"end_at\": \"2025-12-25T11:00:00Z\"}"
                },
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/events",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "events"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 400\", function () {",
                            "    pm.response.to.have.status(400);",
                            "});",
                            "pm.test(\"Error code is BAD_REQUEST\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.eql(\"BAD_REQUEST\");",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "4. 422 VALIDATION_ERROR - Malformed JSON",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Authorization",
                        "value": "Bearer {{access_token}}"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{ \"email\": \"broken-json\" "
                },
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/auth/login",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "auth",
                        "login"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 422\", function () {",
                            "    pm.response.to.have.status(422);",
                            "});",
                            "pm.test(\"Error code is VALIDATION_ERROR\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.eql(\"VALIDATION_ERROR\");",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "5. 401 UNAUTHORIZED - Missing Token",
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/users/me",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "users",
                        "me"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 401\", function () {",
                            "    pm.response.to.have.status(401);",
                            "});",
                            "pm.test(\"Error code is UNAUTHORIZED\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.eql(\"UNAUTHORIZED\");",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "6. 401 TOKEN_EXPIRED - Expired Token",
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxNGJjMzA4OC0yY2MwLTRhMmQtODM4ZC01NGQxMDI0OTYyY2EiLCJlbWFpbCI6ImV4cGlyZWRAZXhhbXBsZS5jb20iLCJyb2xlIjoiVVNFUiIsImV4cCI6MTc2NjY0NTQ5NX0.GVgaFoplgNBinUhA5OWEsJrKRFpUmYZAQPgdCY7mho0"
                    }
                ],
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/users/me",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "users",
                        "me"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 401\", function () {",
                            "    pm.response.to.have.status(401);",
                            "});",
                            "pm.test(\"Error code is TOKEN_EXPIRED\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.eql(\"TOKEN_EXPIRED\");",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "7. 401 UNAUTHORIZED - Invalid Password",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\"email\": \"user@example.com\", \"password\": \"wrongpassword\"}"
                },
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/auth/login",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "auth",
                        "login"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 401\", function () {",
                            "    pm.response.to.have.status(401);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "8. 403 FORBIDDEN - User Accessing Admin",
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{access_token}}"
                    }
                ],
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/admin/users",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "admin",
                        "users"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 403\", function () {",
                            "    pm.response.to.have.status(403);",
                            "});",
                            "pm.test(\"Error code is FORBIDDEN\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.eql(\"FORBIDDEN\");",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "9. 404 RESOURCE_NOT_FOUND - Invalid Calendar ID",
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{access_token}}"
                    }
                ],
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/calendars/999999",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "calendars",
                        "999999"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 404\", function () {",
                            "    pm.response.to.have.status(404);",
                            "});",
                            "pm.test(\"Error code is RESOURCE_NOT_FOUND or CALENDAR_NOT_FOUND\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.be.oneOf([\"RESOURCE_NOT_FOUND\", \"CALENDAR_NOT_FOUND\"]);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "10. 405 METHOD_NOT_ALLOWED - POST to GET Endpoint",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer {{access_token}}"
                    }
                ],
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/users/me",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "users",
                        "me"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 405\", function () {",
                            "    pm.response.to.have.status(405);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "11. 409 DUPLICATE_RESOURCE - Signup Existing Email",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\"email\": \"user@example.com\", \"password\": \"Password123!\", \"display_name\": \"Duplicate\"}"
                },
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/auth/signup",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "auth",
                        "signup"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 409\", function () {",
                            "    pm.response.to.have.status(409);",
                            "});",
                            "pm.test(\"Error code is DUPLICATE_RESOURCE or CONFLICT\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.be.oneOf([\"DUPLICATE_RESOURCE\", \"CONFLICT\"]);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "12. 422 VALIDATION_ERROR - Invalid Email Format",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\"email\": \"not-an-email\", \"password\": \"Password123!\", \"display_name\": \"Test\"}"
                },
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/auth/signup",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "auth",
                        "signup"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 422\", function () {",
                            "    pm.response.to.have.status(422);",
                            "});",
                            "pm.test(\"Error code is VALIDATION_ERROR\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.eql(\"VALIDATION_ERROR\");",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "13. 422 VALIDATION_ERROR - Missing Field",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\"email\": \"test@example.com\"}"
                },
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/auth/signup",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "auth",
                        "signup"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 422\", function () {",
                            "    pm.response.to.have.status(422);",
                            "});",
                            "pm.test(\"Error code is VALIDATION_ERROR\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.eql(\"VALIDATION_ERROR\");",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "14. 401 UNAUTHORIZED - Malformed Token",
            "request": {
                "method": "GET",
                "header": [
                    {
                        "key": "Authorization",
                        "value": "Bearer invalid-token-string"
                    }
                ],
                "url": {
                    "raw": "http://113.198.66.68:10184/api/v1/users/me",
                    "protocol": "http",
                    "host": [
                        "113",
                        "198",
                        "66",
                        "68"
                    ],
                    "port": "10184",
                    "path": [
                        "api",
                        "v1",
                        "users",
                        "me"
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 401\", function () {",
                            "    pm.response.to.have.status(401);",
                            "});",
                            "pm.test(\"Error code is UNAUTHORIZED or INVALID_TOKEN\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.code).to.be.oneOf([\"UNAUTHORIZED\", \"INVALID_TOKEN\"]);",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "access_token",
            "value": ""
        }
    ]
}